<div class="col-lg-12 grid-margin stretch-card">
    <div class="card">
        <div class="card-body">
            <div class="row">
                <div class="card-body col-sm-10">
                    <h4 class="card-title" id="card-title"><em class="fas fa-desktop"></em> Assets </h4>
                </div>

                <div class="card-body col-sm-2" style="display: grid">
                    <button type="button" id="assetbutton" class="btn btn-sm btn-outline-primary btn-fw"
                        [routerLink]="['/dashboard/assets/add']">
                        <em class="fas fa-plus"></em> Add Asset
                    </button>
                </div>
                <div class="text-center">
                    <div *ngIf="loading" class="spinner-border text-primary" role="status">
                        <span class="sr-only">Loading...</span>
                    </div>
                </div>
            </div>
            <div class="col-md-12 mytablehead" id="table">
                <div class="form-group row mx-1">

                    <div class="card-body col-md-1 " style="display: grid">
                        <b>Id</b>
                    </div>
                    <div class="card-body col-md-2 " style="display: grid">
                        <b>Name</b>
                    </div>
                    <div class="card-body col-md-2 " style="display: grid">
                        <b>Category</b>
                    </div>
                    <div class="card-body col-md-2 " style="display: grid">
                        <b>Manufacturer</b>
                    </div>
                    <div class="card-body col-md-1 " style="display: grid">
                        <b>Model</b>
                    </div>
                    <div class="card-body col-md-2 " style="display: grid">
                        <b>Serial No</b>
                    </div>
                    <div class="card-body col-sm-2 " style="display: grid">
                        <b>Assigned to</b>
                    </div>

                </div>
            </div>


        </div>
        <div class="table-responsive">
            <table class="table ">
                <tbody>
                    <tr *ngFor="let asset of allassets;let i = index;">
                        <div class="accordion" id="accordionExample">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingOne">
                                    <div class="prefix heading">#{{i+1}} </div>
                                    <button class="accordion-button collapsed justify-content-between" type="button"
                                        data-bs-toggle="collapse" attr.data-bs-target="{{'#accordion'+i}}"
                                        aria-expanded="true" attr.aria-controls="{{'accordion'+i}}">
                                        <div class="col-md-12" id="accordiondata">
                                            <div class="form-group row mx-1">

                                                <div *ngIf="asset.asset_id.length==null;else shownull"
                                                    class="card-body col-md-1 " style="display: grid">
                                                    <div class="prefix">Id </div>
                                                    {{asset.asset_id}}
                                                </div>
                                                <div class="card-body col-md-2 " style="display: grid">
                                                    <div class="prefix">Name </div>
                                                    {{asset.name}}
                                                </div>
                                                <div class="card-body col-md-2 " style="display: grid">
                                                    <div class="prefix">Category </div>
                                                    {{asset.category_id}}
                                                </div>
                                                <div class="card-body col-md-2 " style="display: grid">
                                                    <div class="prefix">Manufacturer </div>
                                                    {{asset.manufacturer_id}}
                                                </div>
                                                <div class="card-body col-md-1 " style="display: grid">
                                                    <div class="prefix">Model </div>
                                                    {{asset.model_id}}
                                                </div>
                                                <div class="card-body col-md-2 " style="display: grid">
                                                    <div class="prefix">Serial No </div>
                                                    {{asset.serial_no}}
                                                </div>
                                                <div class="card-body col-sm-2 " style="display: grid">
                                                    <div class="prefix">Assigned to </div>
                                                    {{asset.employee_id}}
                                                    <button *ngIf="asset.employee_id==null" type="button"
                                                        id="assign_button" class="btn btn-link
                                " (click)="contAssignToUser(asset.asset_id)"><em class="fas fa-address-card"></em>
                                                        Assign Now</button>
                            </div>

                        </div>
        </div>
        </button>
        </h2>
        <div id="{{'accordion'+i}}" class="accordion-collapse collapse " aria-labelledby="headingOne"
            data-bs-parent="#accordionExample">
            <div class="accordion-body">
                <div class="custom-card">
                    <br>
                    <h4 class="card-title mx-4"><em class="fas fa-info"></em> More Information
                    </h4>

                    <div class="form-group row mx-2">

                        <div class="card-body col-sm-3 " style="display: grid"><b>Group </b>
                            {{asset.group}}</div>
                        <div class="card-body col-sm-3 " style="display: grid"><b>Group in
                                                        charge </b>
                            {{asset.group_in_charge}}</div>
                        <div class="card-body col-sm-3 " style="display: grid"><b>Status </b>
                            {{asset.status}}</div>
                        <div class="card-body col-sm-3 " style="display: grid"><b>Assigned by
                                                    </b>
                            {{asset.user_id}}</div>
                        <div class="card-body col-sm-3" style="display: grid"><b>Audit Status
                                                    </b>
                            {{asset.audit_status}}
                        </div>
                        <div class="card-body col-sm-3 " style="display: grid"><b>Last Audited
                                                        on </b>
                            {{asset.last_audited_date}}
                        </div>
                        <div class="card-body col-sm-3 " style="display: grid"><b>Added on </b>
                            {{asset.created_date}}
                        </div>
                        <div class="card-body col-sm-3 " style="display: grid"><b>Updated on
                                                    </b>
                            {{asset.updated_date}}
                        </div>
                    </div>
                    <br>
                    <h4 *ngIf="asset.asset_attributes.length>0" class="card-title mx-4">
                        <em class="fas fa-puzzle-piece"></em> Add-ons
                    </h4>
                    <div class="form-group row mx-2">
                        <div *ngFor="let attribute of asset.asset_attributes;let j = index;" class="card-body col-sm-3 "
                            style="display: grid">
                            <b>{{attribute.name}}</b>
                            {{attribute.count}}
                        </div>
                    </div>
                    <div class="form-group row" id="accordionbutton">
                        <div class="card-body col-sm-8 " style="display: grid"></div>
                        <div class="card-body col-sm-2" style="display: grid">
                            <button type="button" class="btn btn-primary"
                                                        (click)="goToEditPage(asset.asset_id)"><em
                                                            class="fas fa-edit"></em> Edit</button>
                        </div>
                        <div class="card-body col-sm-2" style="display: grid">

                            <button type="button" class="btn btn-danger
                                " (click)="confirmDeleteModal(content)"><em class="fas fa-trash"></em>
                                                        Delete</button>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>


</div>
<!--Modal-->
<ng-template #content let-modal>
    <div class="modal-header">
        <h4 class="modal-title">Confirm Delete</h4>
        <button type="button" class="btn-close" aria-label="Close"
                                    (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
        <p>Are you sure want to delete {{asset.name}} ?</p>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-danger"
                                    (click)="deleteAsset(asset.asset_id);modal.close('Close click')">Delete</button>
        <button type="button" class="btn btn-light"
                                    (click)="modal.close('Close click')">Cancel</button>
    </div>
</ng-template>
<!--Show not assigned on null values of table-->
<ng-template #shownull>
    Not Assigned
</ng-template>

</tr>


</tbody>
</table>
</div>


<div *ngIf="allassets.length<1" class="card-body col-sm-12 text-center">
    <h4>No Assets Found</h4>
</div>
</div>

</div>
